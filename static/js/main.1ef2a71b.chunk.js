(this.webpackJsonptasks=this.webpackJsonptasks||[]).push([[0],{1:function(t,e,n){"use strict";n.d(e,"a",(function(){return r})),n.d(e,"e",(function(){return c})),n.d(e,"l",(function(){return a})),n.d(e,"k",(function(){return u})),n.d(e,"d",(function(){return o})),n.d(e,"c",(function(){return i})),n.d(e,"i",(function(){return s})),n.d(e,"g",(function(){return f})),n.d(e,"b",(function(){return d})),n.d(e,"f",(function(){return O})),n.d(e,"h",(function(){return b})),n.d(e,"j",(function(){return j}));var r="7676562",c="https://uxcandy.com",a="/~shapoval/test-task-backend/v2/",u="TOKEN",o="SHOW_LOGIN",i="PAGE",s="TASKS",f="STATE",d="MESSAGE",O="SORT",b={UNDEFINED:"UNDEFINED",TASK_LOADING:"TASK_LOADING",TASK_CREATING:"TASK_CREATING",DONE:"DONE",CHECK_LOGIN:"CHECK_LOGIN",GETTING_TASKS:"GETTING_TASKS",CREATING_TASK:"CREATING_TASK"},j=3},25:function(t,e,n){"use strict";n.d(e,"h",(function(){return c})),n.d(e,"b",(function(){return a})),n.d(e,"g",(function(){return u})),n.d(e,"c",(function(){return o})),n.d(e,"d",(function(){return i})),n.d(e,"i",(function(){return s})),n.d(e,"a",(function(){return f})),n.d(e,"e",(function(){return d})),n.d(e,"f",(function(){return O})),n.d(e,"j",(function(){return b}));var r=n(1),c=function(t){return t[r.k]},a=function(t){return t[r.b]},u=function(t){return t[r.i]},o=function(t){return t[r.c]},i=function(t){return{sortField:f(t),sortDirection:t[r.f].direction,page:t[r.c].current}},s=function(t){return t[r.g]===r.h.CHECK_LOGIN},f=function(t){return t[r.f].field},d=function(t){return{field:t[r.f].field,direction:t[r.f].direction}},O=function(t){return t[r.g]===r.h.TASK_LOADING||t[r.g]===r.h.TASK_CREATING},b=function(t){return t[r.d]}},26:function(t,e,n){"use strict";n.d(e,"j",(function(){return d})),n.d(e,"l",(function(){return O})),n.d(e,"b",(function(){return b})),n.d(e,"a",(function(){return j})),n.d(e,"k",(function(){return p})),n.d(e,"g",(function(){return l})),n.d(e,"f",(function(){return m})),n.d(e,"i",(function(){return S})),n.d(e,"c",(function(){return h})),n.d(e,"d",(function(){return g})),n.d(e,"e",(function(){return E})),n.d(e,"h",(function(){return T}));var r=n(11),c=n.n(r),a=n(13),u=n(3),o=n(1),i=function(){return localStorage.getItem(o.k)},s=function(){var t=Object(a.a)(c.a.mark((function t(e){var n,r,a,u,i,s,f,d,O,b,j;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.command,r=e.method,a=e.reqParams,u=e.formParams,n=n||"",r=r||"GET",u=u||{},i={ok:!1,message:"\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a"},(a=a||{}).developer=o.a,t.prev=7,s=o.e+o.l+n+"?"+new URLSearchParams(a),f={mode:"cors",method:r},"POST"===r){for(O in d=new FormData,u)d.append(O,u[O]);f.body=d}return t.next=13,fetch(s,f);case 13:if(!(b=t.sent).ok){t.next=19;break}return t.next=17,b.json();case 17:"ok"===(j=t.sent).status?(i.ok=!0,i.message=j.message):(i.ok=!1,i.message=j.message);case 19:t.next=25;break;case 21:t.prev=21,t.t0=t.catch(7),i.ok=!1,i.message="\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a";case 25:return t.abrupt("return",i);case 26:case"end":return t.stop()}}),t,null,[[7,21]])})));return function(e){return t.apply(this,arguments)}}(),f=n(25),d=function(t){return{type:u.h,payload:{message:t,type:"error"}}},O=function(t){return{type:u.h,payload:{message:t,type:"success"}}},b=function(t){return{type:u.d,payload:{message:t}}},j=function(){return function(t){var e=i();t({type:u.f,payload:{token:e}})}},p=function(t){return{type:u.g,payload:t}},l=function(){return function(t){localStorage.removeItem(o.k),t(j()),t(O("Logout"))}},m=function(t,e){return function(){var n=Object(a.a)(c.a.mark((function n(r){var a;return c.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r({type:u.c}),n.next=3,s({command:"login",method:"POST",formParams:{username:t,password:e}});case 3:(a=n.sent).ok?(c=a.message.token,localStorage.setItem(o.k,c),r(O("Access granted")),r(j())):r(d(a.message));case 5:case"end":return n.stop()}var c}),n)})));return function(t){return n.apply(this,arguments)}}()},S=function(t){return function(e){e({type:u.e,payload:{page:t}}),e(E())}},h=function(t){var e=t.username,n=t.email,r=t.text;return function(){var t=Object(a.a)(c.a.mark((function t(a,o){var i;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a({type:u.j}),t.next=3,s({command:"create",method:"POST",formParams:{username:e,email:n,text:r}});case 3:(i=t.sent).ok?(a({type:u.i,payload:i.message}),a(O("Task created")),a(E())):a(d(i.message));case 5:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()},g=function(t){var e=t.task,n=t.newtext,r=t.newstatus;return function(){var t=Object(a.a)(c.a.mark((function t(a,o){var f,b;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a({type:u.n}),f=i()){t.next=7;break}return a(d("\u0422\u043e\u043a\u0435\u043d \u0438\u0441\u0442\u0451\u043a")),a(j()),a(p(!0)),t.abrupt("return");case 7:return t.next=9,s({command:"edit/"+e.id,method:"POST",formParams:{text:n,status:r,token:f}});case 9:(b=t.sent).ok?(a({type:u.m,payload:{task:e,newtext:n,newstatus:r}}),a(O("Task changed"))):a(d(b.message));case 11:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()},E=function(){return function(){var t=Object(a.a)(c.a.mark((function t(e,n){var r,a,o,i,O;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=Object(f.d)(n()),a=r.sortField,o=r.sortDirection,i=r.page,e({type:u.k}),t.next=4,s({reqParams:{sort_field:a,sort_direction:o?"asc":"desc",page:i}});case 4:(O=t.sent).ok?e({type:u.l,payload:O.message}):e(d(O.message));case 6:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()},T=function(t){return function(e,n){t===Object(f.a)(n())?e({type:u.b}):e({type:u.a,payload:{field:t}}),e(E())}}},3:function(t,e,n){"use strict";n.d(e,"c",(function(){return r})),n.d(e,"f",(function(){return c})),n.d(e,"g",(function(){return a})),n.d(e,"e",(function(){return u})),n.d(e,"k",(function(){return o})),n.d(e,"l",(function(){return i})),n.d(e,"j",(function(){return s})),n.d(e,"i",(function(){return f})),n.d(e,"n",(function(){return d})),n.d(e,"m",(function(){return O})),n.d(e,"h",(function(){return b})),n.d(e,"d",(function(){return j})),n.d(e,"b",(function(){return p})),n.d(e,"a",(function(){return l}));var r="CHECKING_LOGIN",c="SET_TOKEN",a="SHOW_LOGIN_FORM",u="SELECT_PAGE",o="TASK_LOADING",i="TASK_LOAD_SUCCESS",s="TASK_CREATING",f="TASK_CREATE_SUCCESS",d="TASK_SAVING",O="TASK_SAVE_SUCCESS",b="SHOW_MESSAGE",j="CLOSE_MESSAGE",p="CHANGE_SORT_ORDER",l="CHANGE_SORT_FIELD"},44:function(t,e,n){},47:function(t,e,n){},48:function(t,e,n){"use strict";n.r(e);var r,c=n(0),a=n.n(c),u=n(19),o=n.n(u),i=n(18),s=n(31),f=n(6),d=n(26),O=(n(44),n(7)),b=Object(c.lazy)((function(){return n.e(4).then(n.bind(null,50))})),j=Object(c.lazy)((function(){return n.e(3).then(n.bind(null,51))})),p=Object(i.b)((function(t){return{}}),(function(t){return{checkToken:function(){return t(Object(d.a)())},loadTasks:function(){return t(Object(d.e)())}}}))((function(t){var e=t.checkToken,n=t.loadTasks;return Object(c.useEffect)((function(){e(),n()}),[e,n]),Object(O.jsx)("div",{className:"App",children:Object(O.jsx)(s.a,{children:Object(O.jsx)(c.Suspense,{fallback:Object(O.jsx)("div",{children:"Loading..."}),children:Object(O.jsxs)(f.d,{children:[Object(O.jsx)(f.b,{exact:!0,path:"/",component:b}),Object(O.jsx)(f.b,{path:"/login",component:j}),Object(O.jsx)(f.b,{path:"/bejee/",component:b}),Object(O.jsx)(f.b,{path:"/bejee/login",component:j})]})})})})})),l=n(15),m=n(34),S=n(22),h=n(2),g=n(30),E=n(5),T=n(1),k=n(3),y=(r={},Object(E.a)(r,T.f,{direction:!0,field:"id"}),Object(E.a)(r,T.c,{current:1,count:1}),Object(E.a)(r,T.i,[]),Object(E.a)(r,T.g,T.h.UNDEFINED),Object(E.a)(r,T.k,null),Object(E.a)(r,T.b,[]),Object(E.a)(r,T.d,!1),r),_=0,v=function(t){var e=t.message,n=t.type;return"object"===typeof e?Object.entries(e).map((function(t){var e=Object(g.a)(t,2),r=e[0],c=e[1];return{id:_++,strong:r,message:c,type:n}})):[{id:_++,message:e,type:n}]},A=function(){var t,e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y,r=arguments.length>1?arguments[1]:void 0;switch(r.type){case k.g:return Object(h.a)(Object(h.a)({},n),{},Object(E.a)({},T.d,r.payload));case k.d:var c=r.payload.message,a=n[T.b].filter((function(t){return t.id!==c.id}));return Object(h.a)(Object(h.a)({},n),{},Object(E.a)({},T.b,a));case k.h:var u=v(r.payload);return Object(h.a)(Object(h.a)({},n),{},(t={},Object(E.a)(t,T.b,[].concat(Object(S.a)(u),Object(S.a)(n[T.b]))),Object(E.a)(t,T.g,T.h.DONE),t));case k.j:return Object(h.a)(Object(h.a)({},n),{},Object(E.a)({},T.g,T.h.TASK_CREATING));case k.k:return Object(h.a)(Object(h.a)({},n),{},Object(E.a)({},T.g,T.h.TASK_LOADING));case k.l:var o=r.payload,i=o.tasks,s=o.total_task_count,f=1+((+s-1)/T.j|0);return Object(h.a)(Object(h.a)({},n),{},(e={},Object(E.a)(e,T.i,i),Object(E.a)(e,T.g,T.h.DONE),Object(E.a)(e,T.c,{current:n[T.c].current<=f?n[T.c].current:f,count:f}),e));case k.i:return Object(h.a)(Object(h.a)({},n),{},Object(E.a)({},T.g,T.h.DONE));case k.m:var d=r.payload,O=d.task,b=d.newtext,j=d.newstatus,p=Object(S.a)(n[T.i]);return p.filter((function(t){return t.id===O.id})).forEach((function(t){t.text=b,t.status=j})),Object(h.a)(Object(h.a)({},n),{},Object(E.a)({},T.i,p));case k.e:var l=r.payload.page;return Object(h.a)(Object(h.a)({},n),{},Object(E.a)({},T.c,Object(h.a)(Object(h.a)({},n[T.c]),{},{current:l})));case k.c:return Object(h.a)(Object(h.a)({},n),{},Object(E.a)({},T.g,T.h.CHECKING_LOGIN));case k.f:var m=r.payload.token;return Object(h.a)(Object(h.a)({},n),{},Object(E.a)({},T.k,m));case k.b:return Object(h.a)(Object(h.a)({},n),{},Object(E.a)({},T.f,Object(h.a)(Object(h.a)({},n[T.f]),{},{direction:!n[T.f].direction})));case k.a:var g=r.payload.field;return Object(h.a)(Object(h.a)({},n),{},Object(E.a)({},T.f,{direction:!0,field:g}));default:return n}},N=function(t){var e=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||l.c;return Object(l.d)(A,t,e(Object(l.a)(m.a)))},x=(n(47),function(t){t&&t instanceof Function&&n.e(5).then(n.bind(null,52)).then((function(e){var n=e.getCLS,r=e.getFID,c=e.getFCP,a=e.getLCP,u=e.getTTFB;n(t),r(t),c(t),a(t),u(t)}))}),G=N();o.a.render(Object(O.jsx)(a.a.StrictMode,{children:Object(O.jsx)(i.a,{store:G,children:Object(O.jsx)(p,{})})}),document.getElementById("root")),x()}},[[48,1,2]]]);
//# sourceMappingURL=main.1ef2a71b.chunk.js.map